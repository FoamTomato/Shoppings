<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags"%>
<%@taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@page session="true"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>
<%
	String path = request.getContextPath();
	String basePath = request.getScheme() + "://" + request.getServerName() + ":" + request.getServerPort()
			+ path + "/";
%>
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="_csrf" content="${_csrf.token}" />
<meta name="_csrf_header" content="${_csrf.headerName}" />
<title>商城后台</title>
<jsp:include page="../commonCss.jsp" />
<jsp:include page="../commonJs.jsp" />
</head>
<body class="blank" style="margin: 0px; padding: 0px; background: white">

	<div class="form-group col-xs-2">
		<label>商品编号</label> <input id="externalIdsTs${dTfzying.id }"
			name="externalId" class="form-control" type="hidden"
			placeholder="商品编号" value="${dTfzying.id }">
		</p>${dTfzying.id }
	</div>
	<div class="form-group col-xs-10">
		<c:set var="string1" value="${dTfzying.fen}" />
		<c:set value="${fn:split(string1,'毰毸')}" var="st1" />

		<label>商品名称</label> <input id="nameTs${dTfzying.id }" name="name"
			class="form-control" type="hidden" placeholder="商品名称"
			value="${st1[0]}">
		</p>${st1[0]}
	</div>
	<div class="form-group col-xs-12">
		<label>产品分类</label> <select id="fkind${dTfzying.id }"
			name="productStatus" class="form-control">
			<option value="${dTfzying.fkind}" selected="selected">${dTfzying.fkind}</option>
		</select>
	</div>

	<div class="form-group col-xs-12" style="display: block;width: 750px;">
		<div id="picss"></div>
		<div id="mainUpdateimg"
			style="float: left; width: 50px; height: 50px; border: 1px solid #9BCD9B; text-align: center; line-height: 50px; margin: 2.5px">
			<span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
		</div>

	</div>
	<script type="text/javascript">
	var css=${pic};
	for(let po=0;po<css.length;po++){
		$("#picss").append('<img class="mianImgs" width="50px" style="margin: 2.5px;float:left" height="50px" src="/Shopping/resources/uploads/'+css[po]+'">');
	}
	</script>
	<div class="form-group col-xs-2">
		<label>特殊状态</label> <select id="backUpCopy4Ts${dTfzying.id }"
			name="productStatus" class="form-control">
			<option value="0" selected="selected">全部</option>
			<option value="1">重点</option>
			<option value="2">原创</option>
			<option value="3">海外</option>
			<option value="4">抓取</option>
			<option value="5">导入</option>
		</select>
	</div>
	<div class="form-group col-xs-2">
		<label>分销状态</label> <select id="backUpCopy5Ts${dTfzying.id }"
			name="productStatus" class="form-control">
			<option value="0" selected="selected">全部</option>
			<option value="1">分销</option>
			<option value="2">不分销</option>
			<option value="3">没运费</option>
			<option value="4">无挂号</option>
			<option value="5">未分类</option>
			<option value="6">零库存</option>
		</select>
	</div>
	<div class="form-group col-xs-2">
		<label>日期</label> <select id="backUpCopy6Ts${dTfzying.id }"
			name="productStatus" class="form-control">
			<option value="0" selected="selected">全部</option>
			<option value="1">七天内</option>
			<option value="2">一周前</option>
			<option value="3">一月前</option>
			<option value="4">三月前</option>
			<option value="5">半年前</option>
			<option value="6">一年前</option>
			<option value="7">未出单</option>
		</select>
	</div>
	<div class="form-group col-xs-2">
		<label>审核状态</label> <select id="backUpCopy1Ts${dTfzying.id }"
			name="productStatus" class="form-control">
			<option value="0" selected="selected">全部</option>
			<option value="1">通过</option>
			<option value="2">待审核</option>
			<option value="3">过滤</option>
			<option value="4">侵权</option>
			<option value="5">禁止上传</option>
			<option value="6">屏蔽</option>
		</select>
	</div>
	<div class="form-group col-xs-2">
		<label>产品状态</label> <select id="backUpCopy2Ts${dTfzying.id }"
			name="productStatus${dTfzying.id }" class="form-control">
			<option value="0" selected="selected">全部</option>
			<option value="1">已上架</option>
			<option value="2">已下架</option>
			<option value="3">失效</option>
		</select>
	</div>
	<div class="form-group col-xs-2">
		<label>分级及图案</label> <select id="backUpCopy3Ts${dTfzying.id }"
			name="productStatus${dTfzying.id }" class="form-control">
			<option value="0" selected="selected">全部</option>
			<option value="1">未分级</option>
			<option value="2">图案设计</option>
			<option value="3">有图案设计</option>
			<option value="4">国内品牌</option>
			<option value="5">高风险</option>
		</select>
	</div>
	<div class="form-group col-xs-12" style="margin-top: 0px;">
		<label style="color: red; font-size: 12px; font-weight: 400;">设置过滤，侵权和屏蔽，亚马逊上传明细将自动标注"待删除"</label>
	</div>
	<div class="form-group col-xs-3" style="margin-top: 30px;">
		<label>业务员</label>
		<%-- <select id="createUserIdTs${dTfzying.id }" name="productStatus${dTfzying.id }"
			class="form-control">
			<option value="0" selected="selected">全部</option>
			<option value="1">总管理</option>
			<option value="2">管理</option>
			<option value="3">小组组长</option>
			<option value="4">编辑人员</option>
		</select> --%>
		<input name="createUserIdTs${dTfzying.id }"
			id="createUserIdTs${dTfzying.id }" class="form-control" type="hidden"
			placeholder="英文简称" value="${dTfzying.frs6}">
		</p>${dTfzying.frs6}
	</div>
	<div class="form-group col-xs-3" style="margin-top: 30px;">
		<label>原产地区</label> <input name="originArea${dTfzying.id }"
			id="originAreaTs${dTfzying.id }" class="form-control" type="text"
			placeholder="原产地区" value="${dTfzying.forigin}">
	</div>
	<div class="form-group col-xs-3" style="margin-top: 30px;">
		<label>英文简称</label> <input name="englishShort${dTfzying.id }"
			id="englishShortTs${dTfzying.id }" class="form-control" type="text"
			placeholder="英文简称" value="${dTfzying.fenglish}">
	</div>
	<div class="form-group col-xs-3" style="margin-top: 30px;">
		<label>中文简称</label> <input id="chinaShortTs${dTfzying.id }"
			class="form-control" type="text" placeholder="中文简称"
			value="${dTfzying.fchinese}">
	</div>
	<div class="form-group col-xs-3" style="">
		<label>包装毛重</label> <input id="productGrossWeightTs${dTfzying.id }"
			class="form-control" type="text" placeholder="包装毛重"
			value="${dTfzying.fweight}">
	</div>
	<div class="form-group col-xs-6" style="">
		<label>包装尺寸</label>
		<div class="" style="">
			<input name="externalId"
				style="width: 30%; display: -webkit-inline-box"
				id="flength${dTfzying.id }" class="form-control" type="text"
				placeholder="长" value="${dTfzying.flength}"> x <input
				name="externalId" style="width: 30%; display: -webkit-inline-box"
				id="fwidth${dTfzying.id }" class="form-control" type="text"
				placeholder="宽" value="${dTfzying.fwidth}"> x <input
				name="externalId" style="width: 30%; display: -webkit-inline-box"
				id="fheight${dTfzying.id }" class="form-control" type="text"
				placeholder="高" value="${dTfzying.fheight}">
		</div>
	</div>


	<div class="form-group col-xs-3" style="margin-top: 0px;">
		<label>产品币种</label> <input name="productStatus"
			id="productCurrencyTs${dTfzying.id }" class="form-control"
			type="text" placeholder="产品币种" value="${dTfzying.fcur}">
	</div>
	<div class="form-group col-xs-5" style="">
		<label>分销单价</label> <input name="externalId"
			id="priceTs${dTfzying.id }" class="form-control" type="text"
			placeholder="分销单价" value="${dTfzying.fcost}">
	</div>

	<div class="form-group col-xs-2"
		style="margin-top: 30px; font-size: 15px">
		<input type="checkbox" style="margin-right: 10px;"
			<c:if test="${dTfzying.frs9=='2'}">checked</c:if>>分销
	</div>

	<div class="form-group col-xs-5" style="">
		<label>成本单价</label> <input name="externalId" class="form-control"
			type="text" placeholder="成本单价" id="shopPriceTs${dTfzying.id }"
			value="${dTfzying.fprice}">

	</div>

	<div class="form-group col-xs-3" style="">
		<label>固定运费</label> <br>
		<nobr style="display: -webkit-inline-box;    line-height: 30px;">
			<input name="externalId" style="width: 100%; margin-right: 20px;"
				class="form-control" type="text" placeholder="分销单价"
				id="discountTs${dTfzying.id }" value="￥${dTfzying.ffreight}">
			建议用国家运费
		</nobr>
	</div>
	<div class="form-group col-xs-6"
		style="margin-top: 0px; margin-left: 110px">
		<label>适用人群</label>
		<%-- <select name="productStatus" class="form-control"
			id="generalExplainTs${dTfzying.id }">
			<option value="0" selected="selected">全部</option>
			<option value="1">成人</option>
			<option value="2">小孩</option>
		</select> --%>
		<input name="productStatus" style="width: 100%; margin-right: 20px;"
			id="generalExplainTs${dTfzying.id }" class="form-control" type="text"
			placeholder="适用人群" value="${dTfzying.fdepartment}">
	</div>
	<div class="form-group col-xs-12" style="">
		<label>产品来源网址<a style="color: red; margin-left: 20px"
			href="https://${dTfzying.fsource }" target="view_blank">点击查看</a></label>
		</p>
		<textarea class="cdtext" cols="95" rows="1"
			id="sourceUrlTs${dTfzying.id }">${dTfzying.fsource }</textarea>
	</div>

	<div class="form-group col-xs-6" style="margin-top: 0px;">
		<label>产品材料</label>
		<%-- <select name="productStatus" class="form-control"
			id="backUpCopy7Ts${dTfzying.id }">
			<option value="0" selected="selected">全部</option>
			<option value="1">玻璃</option>
			<option value="2">金属</option>
		</select> --%>
		<input id="backUpCopy7Ts${dTfzying.id }"
			style="width: 100%; margin-right: 20px;" class="form-control"
			type="text" placeholder="材料" value="${dTfzying.fmaterial}">
	</div>
	<div class="form-group col-xs-6" style="margin-top: 0px;">
		<label>内部SKU</label> <input name="externalId"
			id="externalIdTs${dTfzying.id }" class="form-control" type="hidden"
			placeholder="分销单价" value="${dTfzying.fsku}">
		</p>${dTfzying.fsku}
	</div>
	<div class="form-group col-xs-12" style="margin-top: 0px;">
		<label>产品变体<nobr style="color:red;font-weight:500">(请用斜杠（/）隔开)</nobr></label>
		</p>
		<div class="col-xs-12">
			颜色&nbsp;
			</p>
			<textarea class="cdtext" cols="95" id="stockColor${dTfzying.id}"
				placeholder="颜色 多个用/隔开"><c:forEach items="${stock }"
					var="stocks" varStatus="index"><c:if test="${stocks.fsize!=1}">${stocks.fcolor}<c:if test="${index.last == false}">/</c:if></c:if></c:forEach></textarea>
		</div>
		<div class="col-xs-12">
			</p>
			尺寸&nbsp;
			</p>
			<textarea class="cdtext" cols="95" id="stockSize${dTfzying.id}"
				placeholder="尺寸 多个用/隔开"></textarea>

		</div>

		<!--<div class="col-xs-12">
			<form id="form" action="action/servlet" method="post" enctype="multipart/form-data" target="frameName" οnsubmit="return false">
             <span>图片上传：</span> 
           <input type="file" id="file"  name="file_input"  onchange="changepic(this)" accept="image/jpg,image/jpeg,image/png,image/PNG" >
            <img src="#" id="img" style="width: 315px;margin:30px auto;display: none;"/>
 			</form>
		</div>-->
		<!-- 遮罩层 -->
		<div class="col-xs-12">
			<div class="modal fade" id="myModal" tabindex="-1" role="dialog"
				aria-labelledby="myModalLabel">
				<div class="modal-dialog" role="document">
					<div class="modal-content" style="margin-top: 600px;">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal"
								aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
							<h4 class="modal-title" id="myModalLabel">修改图片</h4>
						</div>
						<div class="modal-body"
							style="display: inline-block; width: 580px;">
							<div class="form-group" id="mainViewImg"></div>
						</div>
						<div class="modal-footer">
							<div class="form-group" style="float: left">
								<div class="file-container"
									style="float: left; display: inline-block; position: relative; overflow: hidden; vertical-align: middle">
									<button class="btn btn-success fileinput-button" type="button">浏览</button>
									<input type="file" id="jobData"
										onchange="loadFile(this.files[0])"
										style="position: absolute; top: 0; left: 0; font-size: 34px; opacity: 0">
								</div>
								<div id="filename"
									style="float: left; vertical-align: middle; margin-left: 5px; text-overflow: ellipsis; width: 100px; white-space: nowrap; line-height: 34px; font-size: 14px; text-align: left; overflow: hidden;">未选择文件</div>
								<script>
				function loadFile(file){
				    $("#filename").html(file.name);
					//$("#filename").html("已选择文件");
				}
				</script>
								<input id="addim" type="hidden">
								<nobr id="addims"></nobr>


								<nobr id="saveIMGs"></nobr>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="col-xs-12">
				</p>
				<div class="" style="display: -webkit-inline-box">
					<a class="btn btn-primary   ccc" style="margin-top: -5px;"
						onclick="addStock(${dTfzying.id })">更新变体</a> <a
						class="btn btn-primary   ccc"
						style="margin-top: -5px; background: #ee4747; border: 1px solid #ee4747"
						onclick="deleteStock()">删除选择变体</a>
				</div>
			</div>
			<script type="text/javascript">
		var StockUnique=0;
		</script>
			<table class="table-striped " style="width: 700px">

				<tr
					style="color: black; font-size: 14px; line-height: 50px; background: white;">
					<th style="width: 100px; padding: 10px">
						<div style="float: left">
							<input name="stockCheckboxFid" type="checkbox"
								class="stockCheckboxFid" />
						</div>
						<div style="float: left; margin-left: 14px">
							<div id="allInner"
								style="color: red; font-size: 14px; line-height: 30px">全选</div>
							<div id="reverse"
								style="color: red; font-size: 14px; line-height: 0px">反选</div>

						</div>
					</th>
					<th>变体</th>
					<th>SKU(选填)</th>
					<th>库存</th>
					<th>加价</th>
					<th>图片</th>
				</tr>
				<tbody id="StockAdd">
					<c:if test="${stock!=null }">
						<c:forEach items="${stock }" var="stocks">
							<c:if test="${stocks.fsize!=1 }">
								<tr class="del" style="">
									<td style="width: 20px; padding: 10px"><input
										class="classid" type="hidden" value="${stocks.id }"> <input
										class="stockCheckbox" type="checkbox" value="${stocks.id }">
										<div id="tic${stocks.id }"></div></td>
									<td><div class="colorp" id="colorp${stocks.id }"
											style="word-break: break-all; width: 100px">${stocks.fcolor }</div></td>
									<td><input class="no" style="width: 70px; height: 20px"
										type="text" value="${stocks.fid }"></td>
									<td><input class="num" style="width: 70px; height: 20px"
										type="number" value="${stocks.fnum }"></td>
									<td><input class="add" style="width: 70px; height: 20px"
										type="number" value="${stocks.fadd }"></td>
									<td style="max-width: 150px; word-break: break-all"><div
											id="fimgs${stocks.id}"></div> <a
										class="btn btn-primary   ccc" style="margin-left: 5px"
										onclick="btn_add(${stocks.id})">编辑</a></td>
								</tr>
							</c:if>
							<script type="text/javascript">
				//获取变体的唯一id
					StockUnique++;
					$("#tic${stocks.id }").append('<input type="hidden" class="StockUniques" value="'+StockUnique+'">');
					var fimgs=$("#fimgs${stocks.id}");
				//获取图片的值
					var stocksimg="${stocks.fimg}";
					//图片截取
					var result=stocksimg.split(",,");
					for(var ssy=0;ssy<result.length;ssy++){
						//去除空值
						if(result[ssy]==""){
							continue;
						}
						//添加图片
						fimgs.append('<img class="imgStocks${stocks.id}" width="20px" height="20px" style="margin:2.5px" src="/Shopping/resources/uploads/'+result[ssy]+'"/>');
					}
				</script>
						</c:forEach>
					</c:if>
				</tbody>
			</table>
		</div>
		<!-- 选项卡菜单-->
		<ul id="myTab" class="nav nav-tabs" role="tablist"
			style="margin-bottom: 30px">
			<li class="active"><a href="#bulletin" role="tab"
				data-toggle="tab">英语</a></li>
			<li><a href="#rule" role="tab" data-toggle="tab">法语</a></li>
			<li><a href="#forum" role="tab" data-toggle="tab">德语</a></li>
			<li><a href="#security" role="tab" data-toggle="tab">意大利</a></li>
			<li><a href="#spanlish" role="tab" data-toggle="tab">西班牙</a></li>
			<li><a href="#japanese" role="tab" data-toggle="tab">日语</a></li>
			<li><a href="#chinese" role="tab" data-toggle="tab">中文</a></li>
		</ul>
		<!-- 选项卡面板 -->
		<div id="myTabContent" class="tab-content">
			<div class="tab-pane active" id="bulletin">
				<div class="form-group col-xs-12">
					<c:set var="string1" value="${dTfzying.fen}" />
					<c:set value="${fn:split(string1,'毰毸')}" var="st2" />
					<label>产品标题(英语)</label>
					<textarea cols="95" rows="2" id="en1${dTfzying.id }">${st2[0] }</textarea>
					<label>关键词：不超过五行 逗号，空格或回车分隔(英语)</label>
					<textarea cols="95" rows="5"></textarea>
					<label>要点说明：回车分隔，不超过五行，每行不超过五百个字符(英语)</label>
					<textarea cols="95" rows="5" id="en2${dTfzying.id }">${st2[1] }</textarea>
					<label>产品描述：不要输入html标签(英语)</label>
					<textarea cols="95" rows="8" id="en3${dTfzying.id }">${st2[2] }</textarea>
				</div>
			</div>
			<div class="tab-pane " id="rule">
				<div class="form-group col-xs-12">
					<c:set var="string1" value="${dTfzying.ffr}" />
					<c:set value="${fn:split(string1,'毰毸')}" var="st3" />
					<label>产品标题(法语)</label>
					<textarea cols="95" rows="2" id="fr1${dTfzying.id }">${st3[0] }</textarea>
					<label>关键词：不超过五行 逗号，空格或回车分隔(法语)</label>
					<textarea cols="95" rows="5"></textarea>
					<label>要点说明：回车分隔，不超过五行，每行不超过五百个字符(法语)</label>
					<textarea cols="95" rows="5" id="fr2${dTfzying.id }">${st3[1] }</textarea>
					<label>产品描述：不要输入html标签(法语)</label>
					<textarea cols="95" rows="8" id="fr3${dTfzying.id }">${st3[2] }</textarea>
				</div>
			</div>
			<div class="tab-pane " id="forum">
				<div class="form-group col-xs-12">
					<c:set var="string1" value="${dTfzying.fde}" />
					<c:set value="${fn:split(string1,'毰毸')}" var="st4" />
					<label>产品标题(德语)</label>
					<textarea cols="95" rows="2" id="de1${dTfzying.id }">${st4[0] }</textarea>
					<label>关键词：不超过五行 逗号，空格或回车分隔(德语)</label>
					<textarea cols="95" rows="5"></textarea>
					<label>要点说明：回车分隔，不超过五行，每行不超过五百个字符(德语)</label>
					<textarea cols="95" rows="5" id="de2${dTfzying.id }">${st4[1] }</textarea>
					<label>产品描述：不要输入html标签(德语)</label>
					<textarea cols="95" rows="8" id="de3${dTfzying.id }">${st4[2] }</textarea>
				</div>
			</div>
			<div class="tab-pane " id="security">
				<div class="form-group col-xs-12">
					<c:set var="string1" value="${dTfzying.fit}" />
					<c:set value="${fn:split(string1,'毰毸')}" var="st5" />
					<label>产品标题(意大利)</label>
					<textarea cols="95" rows="2" id="it1${dTfzying.id }">${st5[0] }</textarea>
					<label>关键词：不超过五行 逗号，空格或回车分隔(意大利)</label>
					<textarea cols="95" rows="5"></textarea>
					<label>要点说明：回车分隔，不超过五行，每行不超过五百个字符(意大利)</label>
					<textarea cols="95" rows="5" id="it2${dTfzying.id }">${st5[1] }</textarea>
					<label>产品描述：不要输入html标签(意大利)</label>
					<textarea cols="95" rows="8" id="it3${dTfzying.id }">${st5[2] }</textarea>
				</div>
			</div>
			<div class="tab-pane " id="spanlish">
				<div class="form-group col-xs-12">
					<c:set var="string1" value="${dTfzying.fes}" />
					<c:set value="${fn:split(string1,'毰毸')}" var="st6" />
					<label>产品标题(西班牙)</label>
					<textarea cols="95" rows="2" id="es1${dTfzying.id }">${st6[0] }</textarea>
					<label>关键词：不超过五行 逗号，空格或回车分隔(西班牙)</label>
					<textarea cols="95" rows="5"></textarea>
					<label>要点说明：回车分隔，不超过五行，每行不超过五百个字符(西班牙)</label>
					<textarea cols="95" rows="5" id="es2${dTfzying.id }">${st6[1] }</textarea>
					<label>产品描述：不要输入html标签(西班牙)</label>
					<textarea cols="95" rows="8" id="es3${dTfzying.id }">${st6[2] }</textarea>
				</div>
			</div>
			<div class="tab-pane " id="japanese">
				<div class="form-group col-xs-12">
					<c:set var="string1" value="${dTfzying.fja}" />
					<c:set value="${fn:split(string1,'毰毸')}" var="st7" />
					<label>产品标题(日语)</label>
					<textarea cols="95" rows="2" id="ja1${dTfzying.id }">${st7[0] }</textarea>
					<label>关键词：不超过五行 逗号，空格或回车分隔(日语)</label>
					<textarea cols="95" rows="5"></textarea>
					<label>要点说明：回车分隔，不超过五行，每行不超过五百个字符(日语)</label>
					<textarea cols="95" rows="5" id="ja2${dTfzying.id }">${st7[1] }</textarea>
					<label>产品描述：不要输入html标签(日语)</label>
					<textarea cols="95" rows="8" id="ja3${dTfzying.id }">${st7[2] }</textarea>
				</div>
			</div>
			<div class="tab-pane " id="chinese">
				<div class="form-group col-xs-12">
					<c:set var="string1" value="${dTfzying.fzh}" />
					<c:set value="${fn:split(string1,'毰毸')}" var="st8" />

					<label>产品标题(中文)</label>
					<textarea cols="95" rows="2" id="zh1${dTfzying.id }">${st8[0] }</textarea>
					<label>关键词：不超过五行 逗号，空格或回车分隔(中文)</label>
					<textarea cols="95" rows="5"></textarea>
					<label>要点说明：回车分隔，不超过五行，每行不超过五百个字符(中文)</label>
					<textarea cols="95" rows="5" id="zh2${dTfzying.id }">${st8[1] }</textarea>
					<label>产品描述：不要输入html标签(中文)</label>
					<textarea cols="95" rows="8" id="zh3${dTfzying.id }">${st8[2] }</textarea>
				</div>
			</div>
			<a href="javascript:void(0)" class="easyui-linkbutton"
				style="background: #62cb31; border: 1px solid #62cb31; color: white; margin: 15px; padding: 5px;"
				onclick="updatePanels(${dTfzying.id })">修改</a> <a
				href="javascript:void(0)" class="easyui-linkbutton"
				style="background: #ee4747; border: 1px solid #ee4747; color: white; margin: 15px; padding: 5px;"
				onclick="deletePanels()">删除</a>
		</div>



		<script type="text/javascript">

	
	//特殊状态backUpCopy4T${dTfzyings.id}
	var backUpCopy4T = document.getElementById("backUpCopy4Ts${dTfzying.id }");
	//分销状态backUpCopy5T${dTfzyings.id}
	var backUpCopy5T = document.getElementById("backUpCopy5Ts${dTfzying.id }");
	//日期backUpCopy6T${dTfzyings.id}
	var backUpCopy6T = document.getElementById("backUpCopy6Ts${dTfzying.id }");
	//审核状态backUpCopy1T${dTfzyings.id}
	var backUpCopy1T = document.getElementById("backUpCopy1Ts${dTfzying.id }");
	//产品状态backUpCopy2T${dTfzyings.id}
	var backUpCopy2T = document.getElementById("backUpCopy2Ts${dTfzying.id }");
	//分级及图案backUpCopy3T${dTfzyings.id}
	var backUpCopy3T = document.getElementById("backUpCopy3Ts${dTfzying.id }");
	//创建者id  createUserIdT${dTfzyings.id}
	var createUserIdT = document.getElementById("createUserIdTs${dTfzying.id }");
	//原产地区originAreaT${dTfzyings.id}
	var originAreaT = document.getElementById("originAreaTs${dTfzying.id }");
	//英文简称englishShortT${dTfzyings.id}
	var englishShortT = document.getElementById("englishShortTs${dTfzying.id }");
	//中文简称chinaShortT${dTfzyings.id}
	var chinaShortT = document.getElementById("chinaShortTs${dTfzying.id }");
	//产品毛重productGrossWeightT${dTfzyings.id}
	var productGrossWeightT = document.getElementById("productGrossWeightTs${dTfzying.id }");
	//产品尺寸productSizeT${dTfzyings.id}
	var productSizeT = document.getElementById("productSizeTs${dTfzying.id }");
	//产品币种productCurrencyT${dTfzyings.id}
	var productCurrencyT = document.getElementById("productCurrencyTs${dTfzying.id }");
	//分销单价priceT${dTfzyings.id}
	var priceT = document.getElementById("priceTs${dTfzying.id }");
	//成本单价shopPriceT${dTfzyings.id}
	var shopPriceT = document.getElementById("shopPriceTs${dTfzying.id }");
	//运费discountT${dTfzyings.id}
	var discountT = document.getElementById("discountTs${dTfzying.id }");
	//适用人群generalExplainT${dTfzyings.id}
	var generalExplainT = document.getElementById("generalExplainTs${dTfzying.id }");
	//采购链接sourceUrlT${dTfzyings.id}
	var sourceUrlT = document.getElementById("sourceUrlTs${dTfzying.id }");
	//产品材料backUpCopy7T${dTfzyings.id}
	var backUpCopy7T = document.getElementById("backUpCopy7Ts${dTfzying.id }");
	//内部sku externalIdT${dTfzyings.id}
	var externalIdT = document.getElementById("externalIdTs${dTfzying.id }");
	function readyNumber() { 

		  $('.cdtext').each(function () {
		     this.setAttribute('style', 'height:' + (this.scrollHeight) + 'px;overflow-y:hidden;');
		  }).on('input', function () {
		  this.style.height = 'auto';
		  this.style.height = (this.scrollHeight) + 'px';
		  })
		}

		readyNumber()
		
	//进行分类判断  如果jt大于一  则表示有不存在的分类id  默认赋值为0   0就是全部
		/* var jT = 0;
		for (var lou = 0; lou < $('#fcateidp${dTfzying.id }')[0].length; lou++) {
			if ($('#fcateidp${dTfzying.id }')[0].options[lou].value == '${dTfzying.fkind}') {
				jT++;
			}
		}
		if (jT != 0) {
			$('#fcateidp${dTfzying.id }').val('${dTfzying.fkind}');
		} else {
			$('#fcateidp${dTfzying.id }').val(0);
		} */
		//特殊状态
		if(backUpCopy4T.value==null||backUpCopy4T.value==""){
			$("#backUpCopy4Ts${dTfzying.id }").val(0);
		}else{
		 	$("#backUpCopy4Ts${dTfzying.id }").val(${dTfzying.frs1});
		 }
		//分销状态
		if(backUpCopy5T.value==null||backUpCopy5T.value==""){
			$("#backUpCopy5Ts${dTfzying.id }").val(0);
		}else{
		 	$("#backUpCopy5Ts${dTfzying.id }").val(${dTfzying.frs2});
		 }
		//日期
		/* if(backUpCopy6T.value==null||backUpCopy6T.value==""){
			$("#backUpCopy6Ts${dTfzying.id }").val(0);
		}else{
		 	$("#backUpCopy6Ts${dTfzying.id }").val(${dTfzying.frs10});
		 } */
		//审核状态
		if(backUpCopy1T.value==null||backUpCopy1T.value==""){
			$("#backUpCopy1Ts${dTfzying.id }").val(0);
		}else{
		 	$("#backUpCopy1Ts${dTfzying.id }").val(${dTfzying.frs3});
		 }
		//产品状态
		if(backUpCopy2T.value==null||backUpCopy2T.value==""){
			$("#backUpCopy2Ts${dTfzying.id }").val(0);
		}else{
		 	$("#backUpCopy2Ts${dTfzying.id }").val(${dTfzying.frs4});
		 }
		//分级及图案
		if(backUpCopy3T.value==null||backUpCopy3T.value==""){
			$("#backUpCopy3Ts${dTfzying.id }").val(0);
		}else{
		 	$("#backUpCopy3Ts${dTfzying.id }").val(${dTfzying.frs5});
		 }
		//创建者id
		/* if(createUserIdT.value==null||createUserIdT.value==""){
			$("#createUserIdTs${dTfzying.id }").val(0);
		}else{
		 	$("#createUserIdTs${dTfzying.id }").val(${dTfzying.frs6});
		 } */
		//原产地区
		if(originAreaT.value==null||originAreaT.value==""||originAreaT.value==0){
			$("#originAreaTs${dTfzying.id }").val('china');
		}else{
		 	$("#originAreaTs${dTfzying.id }").val("${dTfzying.forigin}");
		 }
		//console.log(originAreaT);
		//英文简称
		/* if(englishShortT.value==null||englishShortT.value==""){
			$("#englishShortTs${dTfzying.id }").val(0);
		}else{
		 	$("#englishShortTs${dTfzying.id }").val(${dTfzying.fenglish});
		 } */
		//中文简称
		/* if(chinaShortT.value==null||chinaShortT.value==""){
			$("#chinaShortTs${dTfzying.id }").val(0);
		}else{
		 	$("#chinaShortTs${dTfzying.id }").val(${dTfzying.fchinese});
		 } */
		//产品毛重
		/* if(productGrossWeightT.value==null||productGrossWeightT.value==""){
			$("#productGrossWeightTs${dTfzying.id }").val(0);
		}else{
		 	$("#productGrossWeightTs${dTfzying.id }").val(${dTfzying.fweight});
		 } */
		//产品尺寸
		/* if(productSizeT.value==null||productSizeT.value==""){
			$("#productSizeTs${dTfzying.id }").val(0);
		}else{
		 	$("#productSizeTs${dTfzying.id }").val(${dTfzying.flength});
		 } */
		//产品币种
		/* if(productCurrencyT.value==null||productCurrencyT.value==""){
			$("#productCurrencyTs${dTfzying.id }").val(0);
		}else{
		 	$("#productCurrencyTs${dTfzying.id }").val(${dTfzying.fkeys});
		 } */
		//分销单价
		if(priceT.value==null||priceT.value==""){
			$("#priceTs${dTfzying.id }").val(0);
		}else{
		 	$("#priceTs${dTfzying.id }").val("${dTfzying.fprice}");
		 }
		//成本单价
		if(shopPriceT.value==null||shopPriceT.value==""){
			$("#shopPriceTs${dTfzying.id }").val(0);
		}else{
		 	$("#shopPriceTs${dTfzying.id }").val("${dTfzying.fcost}");
		 }
		//运费
		if(discountT.value==null||discountT.value==""){
			$("#discountTs${dTfzying.id }").val(0);
		}else{
		 	$("#discountTs${dTfzying.id }").val("${dTfzying.ffreight}");
		 }
		//适用人群
		if(generalExplainT.value==null||generalExplainT.value==""){
			$("#generalExplainTs${dTfzying.id }").val(0);
		}else{
		 	$("#generalExplainTs${dTfzying.id }").val("${dTfzying.fdepartment}");
		 }
		//采购链接
		/* if(sourceUrlT.value==null||sourceUrlT.value==""){
			$("#sourceUrlTs${dTfzying.id }").val(0);
		}else{
		 	$("#sourceUrlTs${dTfzying.id }").val("${dTfzying.fsource}");
		 } */
		//产品材料
		/* if(backUpCopy7T.value==null||backUpCopy7T.value==""){
			$("#backUpCopy7Ts${dTfzying.id }").val(0);
		}else{
		 	$("#backUpCopy7Ts${dTfzying.id }").val(${dTfzying.fmaterial});
		 } */
		//内部sku
		/* if(externalIdT.value==null||externalIdT.value==""){
			$("#externalIdTs${dTfzying.id }").val(0);
		}else{
		 	$("#externalIdTs${dTfzying.id }").val(${dTfzying.fsku});
		 } */
		//修改右侧商品详情
		function updatePanels(ids){
			 
			//分隔符
				var br="毰毸";
				//获取英语
				var en1 = document.getElementById("en1${dTfzying.id }").value;
				var en2 = document.getElementById("en2${dTfzying.id }").value;
				var en3 = document.getElementById("en3${dTfzying.id }").value;

				//获取法语
				var fr1 = document.getElementById("fr1${dTfzying.id }").value;
				var fr2 = document.getElementById("fr2${dTfzying.id }").value;
				var fr3 = document.getElementById("fr3${dTfzying.id }").value;
				//获取德语
				var de1 = document.getElementById("de1${dTfzying.id }").value;
				var de2 = document.getElementById("de2${dTfzying.id }").value;
				var de3 = document.getElementById("de3${dTfzying.id }").value;
				//获取意大利
				var it1 = document.getElementById("it1${dTfzying.id }").value;
				var it2 = document.getElementById("it2${dTfzying.id }").value;
				var it3 = document.getElementById("it3${dTfzying.id }").value;
				//获取西班牙
				var es1 = document.getElementById("es1${dTfzying.id }").value;
				var es2 = document.getElementById("es2${dTfzying.id }").value;
				var es3 = document.getElementById("es3${dTfzying.id }").value;
				//获取日语
				var ja1 = document.getElementById("ja1${dTfzying.id }").value;
				var ja2 = document.getElementById("ja2${dTfzying.id }").value;
				var ja3 = document.getElementById("ja3${dTfzying.id }").value;
				//获取中文
				var zh1 = document.getElementById("zh1${dTfzying.id }").value;
				var zh2 = document.getElementById("zh2${dTfzying.id }").value;
				var zh3 = document.getElementById("zh3${dTfzying.id }").value;
			
			//商品编号
			var externalIdTs=ids;
			//商品名称
			var nameTT=document.getElementById("nameTs"+ids).value;
			//商品分类
			//var FproductStatusTT=document.getElementById("fcateidp"+ids).value;
			var fkinds =document.getElementById("fkind"+ids).value;
			//特殊状态
			var backUpCopy4TT=document.getElementById("backUpCopy4Ts"+ids).selectedIndex;
			//分销状态
			var backUpCopy5TT=document.getElementById("backUpCopy5Ts"+ids).selectedIndex;
			//日期
			var backUpCopy6TT=document.getElementById("backUpCopy6Ts"+ids).selectedIndex;
			//审核状态
			var backUpCopy1TT=document.getElementById("backUpCopy1Ts"+ids).selectedIndex;
			//产品状态
			var backUpCopy2TT=document.getElementById("backUpCopy2Ts"+ids).selectedIndex;
			//分级及图案
			var backUpCopy3TT=document.getElementById("backUpCopy3Ts"+ids).selectedIndex;
			//业务员
			var createUserIdTT=document.getElementById("createUserIdTs"+ids).selectedIndex;
			//原产地区
			var originAreaTT=document.getElementById("originAreaTs"+ids).value;
			//英文简称
			var englishShortTT=document.getElementById("englishShortTs"+ids).value;
			//中文简称
			var chinaShortTT=document.getElementById("chinaShortTs"+ids).value;
			//包装毛重
			var productGrossWeightTT=document.getElementById("productGrossWeightTs"+ids).value;
			//包装尺寸
			//var productSizeTT=document.getElementById("productSizeTs"+ids).value;
			//长
			var flength=document.getElementById("flength"+ids).value; 
			//宽fwidth
			var fwidth=document.getElementById("fwidth"+ids).value; 
			//高fheight
			var fheight=document.getElementById("fheight"+ids).value; 
			//产品币种
			var productCurrencyTT=document.getElementById("productCurrencyTs"+ids).value;
			//分销单价
			var priceTT=document.getElementById("priceTs"+ids).value;
			//成本单价
			var shopPriceTT=document.getElementById("shopPriceTs"+ids).value;
			//固定运费
			var discountTT=document.getElementById("discountTs"+ids).value;
			//适用人群
			var generalExplainTT=document.getElementById("generalExplainTs"+ids).value;
			//来源网址
			var sourceUrlTT=document.getElementById("sourceUrlTs"+ids).value;
			//产品材料
			var backUpCopy7TT=document.getElementById("backUpCopy7Ts"+ids).value;
			//内部sku
			var externalIdTT=document.getElementById("externalIdTs"+ids).value;
			/*  console.log("商品编号:"+externalIdTs+"_商品名称:"+nameTT+"_商品分类:"+FproductStatusTT+"_特殊状态:"+backUpCopy4TT+"_分销状态"+backUpCopy5TT+
					 "_日期:"+backUpCopy6TT+"_审核状态:"+backUpCopy1TT+"_产品状态:"+backUpCopy2TT+"_分级及图案:"+backUpCopy3TT+"_业务员:"+createUserIdTT+
					 "_原产地区:"+originAreaTT+"_英文简称:"+englishShortTT+"_中文简称:"+chinaShortTT+"_包装毛重:"+productGrossWeightTT+"_包装尺寸:"+productSizeTT+
					 "_产品币种:"+productCurrencyTT+"_分销单价:"+priceTT+"_成本单价:"+shopPriceTT+"_固定运费:"+discountTT+"_适用人群:"+generalExplainTT+
					 "_来源网址:"+sourceUrlTT+"_产品材料:"+backUpCopy7TT+"_内部sku:"+externalIdTT); */
			
					 //后台获取进行修改
			 var person = JSON.stringify({
					"id": externalIdTs,
					"name": nameTT,
					"fkind": fkinds,
					"fcost": priceTT,
					"frs1": backUpCopy4TT,
					"frs2": backUpCopy5TT,
					//"frs10": backUpCopy6TT,
					"frs3": backUpCopy1TT,
					"frs4": backUpCopy2TT,
					"frs5": backUpCopy3TT,
					"frs6": createUserIdTT,
					"forigin": originAreaTT,
					"fenglish": englishShortTT,
					"fchinese": chinaShortTT,
					"fweight": productGrossWeightTT,
					"flength": flength,
					"fwidth": fwidth,
					"fheight": fheight,
					"fcur": productCurrencyTT,
					"fprice": shopPriceTT,
					"ffreight": discountTT,
					"fdepartment": generalExplainTT,
					"fsource": sourceUrlTT,
					"fmaterial": backUpCopy7TT,
					"fen":en1+br+en2+br+en3,
					"fzh":zh1+br+zh2+br+zh3,
					"fja":ja1+br+ja2+br+ja3,
					"fes":es1+br+es2+br+es3,
					"fit":it1+br+it2+br+it3,
					"fde":de1+br+de2+br+de3,
					"ffr":fr1+br+fr2+br+fr3
				})
			 $.ajax({
					type : 'post',
					contentType : 'application/json;charset=utf-8', 
					url :'${pageContext.request.contextPath}/adminsdf/productUpdate?${_csrf.parameterName}=${_csrf.token}',
					/* 其他搜索：name，产品编号：externalId，最低价格：price1，最高价格：price2，产品分类：categoryId，审核状态： backUpCopy1
					产品状态：backUpCopy2，分级及图案：backUpCopy3，产品状态：productStatus，特殊状态：backUpCopy4，分销状态：backUpCopy5，
					日期：backUpCopy6，热门商品：hot，业务员：createUserId，更新日期：updateTime1，截止日期：updateTime2*/
					 data:person,
					dataType : 'json',
					success : function(data) {
						swal("提示", "修改成功!", "success");  
						//进行变体的添加
						testStock();
					},
					error : function(json) {
						swal("提示", "修改失败!", "error");  
					}
				});
		}
		 
		//删除右侧商品详情
		function deletePanels(ids){
			var externalIdTs=document.getElementById("externalIdsTs${dTfzying.id }").value;
			//后台获取进行修改
			 $.ajax({
					type : "get",
					async:true,
					contentType : "application/json;charset=utf-8", 
					url :'${pageContext.request.contextPath}/admin/productDelete',
					/* 其他搜索：name，产品编号：externalId，最低价格：price1，最高价格：price2，产品分类：categoryId，审核状态： backUpCopy1
					产品状态：backUpCopy2，分级及图案：backUpCopy3，产品状态：productStatus，特殊状态：backUpCopy4，分销状态：backUpCopy5，
					日期：backUpCopy6，热门商品：hot，业务员：createUserId，更新日期：updateTime1，截止日期：updateTime2*/
					 data:{"id":externalIdTs},  
					dataType : 'json',
					success : function(data) {

						//if(top.location!=self.location)top.location=self.location;
						swal({
						  title: "确认删除?",
						  type: "warning",
						  showCancelButton: true,
						  confirmButtonColor: "#DD6B55",
						  confirmButtonText: "删除",
						  cancelButtonText: "取消",
						  closeOnConfirm: false,
						  closeOnCancel: false
						},
						function(isConfirm){
						  if (isConfirm) {
							swal({
							  title: "删除成功!",
							  type: "success",
							  confirmButtonColor: "#9BCD9B",
							  confirmButtonText: "确定",
							  closeOnConfirm: false
							},
							function(isConfirm){
								parent.location.reload(); 
							 });
						  } else {
							    swal("取消成功", "请继续您的操作", "error");
						  }
						});
						//swal("提示", "删除成功!", "success"); 
						
					},
					error : function(json) {

						swal("提示", "删除失败！!", "error");  

					}
				});
		}
		
		//进行去重添加判断
		function addandclose(ids){
			
			
		}
		//随机出一个id
		function createRandomId() {
			            return (new Date()).getTime();
			        }
		//添加变体addStock
		function addStock(ids){
			//获取变体的id
			var stockids=$("#Stockid${dTfzying.id }").val();
			//获取颜色值
			var color=$("#stockColor${dTfzying.id}").val();
			//获取尺寸值
			var size=$("#stockSize${dTfzying.id}").val();
			//获取变体值
			var stocks=$("#StockAdd");
			//获取颜色值
			var test=$(".colorp");
			if(color=="" && size==""){
				swal("提示", "请输入变体再进行添加!", "error");
				return false;
			}
			
			//字符串截取为数组
			var colors=color.split("/");
			var colorL=Array.from(new Set(colors));
			var sizes=size.split("/");
			var sizeL=Array.from(new Set(sizes));
			
			if(color==""){
				for(y = 0,len=sizeL.length; y < len; y++) {
					let c=sizeL[y];
					let pi=0;
					for(var i=0;i<test.length;i++){
						//获取变体名称
						if(c ==""||c==null){
							pi++;
							continue;
						}
						if(c == test[i].innerText){
							$(".del")[i].style.display="table-row";
							pi++;
							continue;
						}
					}
					if(pi<1){
						StockUnique++;
						let c=createRandomId();
			    	stocks.append('<tr class="del"   style="line-height: 60px;">'+
							'<td style="width:20px;padding:10px"><input class="classid" type="hidden" value=""><input class="stockCheckbox" type="checkbox" value="'+c+'"></td>'+
					'<td><div style="word-break : break-all;width:100px;line-height:20px" class="colorp"  id="colorp'+ids+'">'+sizeL[y]+'</div></td>'+
					'<td><input type="number"  class="no" style="width:70px;height:20px"></td>'+
					'<td><input type="number"  class="num" style="width:70px;height:20px"></td>'+
					'<td><input type="number"  class="add" style="width:70px;height:20px"></td>'+
					'<td style="max-width: 150px; word-break: break-all"><div id="fimgs'+c+'"></div><a class="btn btn-primary   ccc" style="margin-left: 5px" onclick="btn_add('+c+')">编辑</a></td>'+
				'</tr>');/* <img alt="加载中" src="" width="20px" height="20px"> */
					}};
			}else if(size==""){
				for(j = 0,len=colorL.length; j < len; j++) {
					let c=colorL[j];
					let pi=0;
					for(var i=0;i<test.length;i++){
						//获取变体名称
						if(c ==""||c==null){
							pi++;
							continue;
						}
						if(c == test[i].innerText){
							$(".del")[i].style.display="table-row";
							pi++;
							continue;
						}
						

					}
					if(pi<1){
						StockUnique++;
						let c=createRandomId();
						stocks.append('<tr class="del"  style="line-height: 60px;">'+
								'<td style="width:20px;padding:10px;"><input class="classid" type="hidden" value=""><input class="stockCheckbox" type="checkbox"  value="'+c+'"></td>'+
								'<td><divstyle="word-break : break-all;width:100px;line-height:20px"  class="colorp"  id="colorp'+ids+'">'+colorL[j]+'</div></td>'+
								'<td><input type="text"  class="no" style="width:70px;height:20px"></td>'+
								'<td><input type="number"  class="num" style="width:70px;height:20px"></td>'+ 
								'<td><input type="number"  class="add" style="width:70px;height:20px"></td>'+
								'<td style="max-width: 150px; word-break: break-all"><div id="fimgs'+c+'"></div><a class="btn btn-primary   ccc" style="margin-left: 5px" onclick="btn_add('+c+')">编辑</a></td>'+
							'</tr>');
					}
					
				}
			}else{
			for(j = 0,len=colorL.length; j < len; j++) {
				for(y = 0,lens=sizeL.length; y < lens; y++) {
					let c=colorL[j]+sizeL[y];
					let sum=0;
					for(var i=0;i<test.length;i++){
						//获取变体名称
						console.log(test[i].innerText);	
						console.log(c);
						if(c ==""||c==null){
							sum++;
							continue;
						}
						if(c == test[i].innerText){
							$(".del")[i].style.display="table-row";
							sum++;
							continue;
						}
						
					}
					if(sum<1){
						StockUnique++;
						let c=createRandomId();
						stocks.append('<tr class="del" style="line-height: 60px;">'+
								'<td style="width:20px;padding:10px"><input class="classid" type="hidden" value=""><input class="stockCheckbox" type="checkbox" value="'+c+'"></td>'+
								'<td><div style="word-break : break-all;width:100px;line-height:20px" class="colorp"  id="colorp'+ids+'">'+colorL[j]+sizeL[y]+'</div></td>'+
								'<td><input type="text" class="no" style="width:70px;height:20px"></td>'+
								'<td><input type="number" class="num" style="width:70px;height:20px"></td>'+
								'<td><input  type="number" class="add" style="width:70px;height:20px"></td>'+
								'<td style="max-width: 150px; word-break: break-all"><div id="fimgs'+c+'"></div><a class="btn btn-primary   ccc" style="margin-left: 5px" onclick="btn_add('+c+')">编辑</a></td>'+
							'</tr>');
						
						
					}
					
			    	/* <img alt="加载中" src="" width="20px" height="20px"> */
			};
			};
			
			}
			
			//获取选中值
			let coloreds="";
			var test=$(".stockCheckbox");
			for(var i=0;i<test.length;i++){
				var nones=$(".del")[i].style.display;
				//获取变体名
				//coloreds=$(".colorp")[i].innerHTML;
				
				//获取变体名称
				if(nones!="none"){
					coloreds=coloreds+"/"+$(".colorp")[i].innerHTML;
					$("#stockColor${dTfzying.id}").val(coloreds.substring(1));
					$("#stockSize${dTfzying.id}").val("");
					//$(".del")[i].style.display="none";
				}
			}
			//单选
			var checkS = $(".stockCheckbox");
			for(var i = 0;i<checkS.length;i++){
			    /*那这里可能有小伙伴会说了，萍子你不是说好了要用jq的方法，怎么又写了js的方法呢。
			    原因是，当对一个jq数组对象取下标以后，取到的这个就变成了一个原生对象，所以这里我又用了js原生方法。
			    当然了，如果还是想用jq方法的话也是可以的，再在元素外面套一个$()就OK了。*/
			    checkS[i].onclick = function(){

			        var isSelectAll = true;//假设全选是选中状态的自定义变量
			        for(var i = 0;i<checkS.length;i++){
			            if(checkS[i].checked == false){
			                isSelectAll = false;
			                break;
			            }
			        }
			        if(isSelectAll){
			            $('input[name="stockCheckboxFid"]').prop("checked",true);
			            $("#allInner").html("全不选");
			        }
			        if(this.checked == false){
			            $('input[name="stockCheckboxFid"]').prop("checked",false);
			            $("#allInner").html("全选");
			        }
			    }
			}
		}
		
		//进行stock的删除判断
		function IFStock(){
			//进行判断
			//获取选中值
			var c=""
			var test=$(".stockCheckbox");
			for(var i=0;i<test.length;i++){
				//获取变体名称
				if(test[i].checked==true){
					c=c+$(".StockUniques")[i].value+",";
				}
			}

		}
		//查詢所有的变体addStock
		function testStock(){
			//获取选中值
			var test=$(".stockCheckbox");
			for(var i=0;i<test.length;i++){
				//获取变体名称
				
				if(test[i].checked==true&&($(".del")[i].style.display=="none")){
					//获取id
					var classids=$(".classid")[i].value;
					var dateas=JSON.stringify({
						"id":classids,
						"fsize":"1",
						"fid":"${dTfzying.fsku}"
					});
					$.ajax({
						type : "post",
						contentType : "application/json;charset=utf-8", 
						url :"${pageContext.request.contextPath}/Stock/productUpdate?${_csrf.parameterName}=${_csrf.token}",
						data:dateas,
						dataType:"json",
						success:function(data){
						},
						error:function(json){

							swal("提示", "添加变体失败!", "error");  
						}
					}); 
					
				}
				else if(($(".del")[i].style.display!="none")){
					//console.log(".no"+$(".colorp")[i].innerHTML);
					//console.log("+======"+test[i].value);
					//获取变体sku编号
					var noed=$(".no")[i].value;
					//获取变体名
					var colored=$(".colorp")[i].innerHTML;
					//获取id
					var classids=$(".classid")[i].value;
					//获取变体库存
					var numed=$(".num")[i].value;
					//获取变体加价
					var added=$(".add")[i].value;
					//获取单独变体图片
					var imged=$(".imgStocks"+test[i].value);
					//进行单体图片遍历
					var arr="";
					for(var imglist=0;imglist<imged.length;imglist++){
						//console.log("${pageContext.request.contextPath}");
						var photo=imged[imglist].src.split("Shopping/resources/uploads/");
						arr=arr+",,"+photo[1];
					}
					var datea=JSON.stringify({
							"id":classids,
							"fcolor":colored,
							"fno":noed,
							"fadd":added,
							"fnum":numed,
							"fimg":arr,
							"fid":"${dTfzying.fsku}"
						});
					console.log(datea);
					 $.ajax({
						type : "post",
						contentType : "application/json;charset=utf-8", 
						url :"${pageContext.request.contextPath}/Stock/productUpdate?${_csrf.parameterName}=${_csrf.token}",
						data:datea,
						dataType:"json",
						success:function(data){
						},
						error:function(json){
							swal("提示", "添加变体失败!", "error");  
						}
					}); 
					//console.log(noed+","+colored+","+numed+","+added+","+imged[5].src);
				}else if(($(".del")[i].style.display=="none")){
					//获取id
					var classids=$(".classid")[i].value;
					var dateas=JSON.stringify({
						"id":classids,
						"fsize":"1",
						"fid":"${dTfzying.fsku}"
					});
					$.ajax({
						type : "post",
						contentType : "application/json;charset=utf-8", 
						url :"${pageContext.request.contextPath}/Stock/productUpdate?${_csrf.parameterName}=${_csrf.token}",
						data:dateas,
						dataType:"json",
						success:function(data){
						},
						error:function(json){
							swal("提示", "添加变体失败!", "error");  
						}
					}); 
					
				}
			}
		}
		
		//删除选中变体
		 function deleteStock(){
			//获取选中值
			let coloreds="";
				var test=$(".stockCheckbox");
				if($(".stockCheckboxFid").is(':checked')){
					for(var i=0;i<test.length;i++){
						//获取变体名称
						$(".del")[i].style.display="none";
						$("#stockColor${dTfzying.id}").val("");	
					}
					
				}else{
				for(var i=0;i<test.length;i++){
					//获取变体名称
					
					if(test[i].checked==true){
						
						$(".del")[i].style.display="none";
					}else{
						coloreds=coloreds+"/"+$(".colorp")[i].innerHTML;
						
						$("#stockColor${dTfzying.id}").val(coloreds.substring(1));
						
					}
				}}
		}
		
		
		//进行颜色输入框的变化
		function ColorStock(){
			//进行判断
			//获取选中值
			let coloreds="";
			var test=$(".stockCheckbox");
			for(var i=0;i<test.length;i++){
				var nones=$(".del")[i].style.display;
				//获取变体名
				//coloreds=$(".colorp")[i].innerHTML;
				
				//获取变体名称
				if(nones!="none"){
					coloreds=coloreds+"/"+$(".colorp")[i].innerHTML;
					$("#stockColor${dTfzying.id}").val(coloreds.substring(1));
					//$(".del")[i].style.display="none";
				}
			}
			
		}
		//全选
		 $("#allInner").on("click",function(){
			if($('input[name="stockCheckboxFid"]').is(":checked")==false){
		        $(".stockCheckbox").prop("checked",true);
		        $('input[name="stockCheckboxFid"]').prop("checked",true);
	            $("#allInner").html("全不选");
		    }else{
		        $(".stockCheckbox").prop("checked",false);
		        $('input[name="stockCheckboxFid"]').prop("checked",false);
	            $("#allInner").html("全选");
		    }
		}); 
		
		//单选
			var checkS = $(".stockCheckbox");
			for(var i = 0;i<checkS.length;i++){
			    /*那这里可能有小伙伴会说了，萍子你不是说好了要用jq的方法，怎么又写了js的方法呢。
			    原因是，当对一个jq数组对象取下标以后，取到的这个就变成了一个原生对象，所以这里我又用了js原生方法。
			    当然了，如果还是想用jq方法的话也是可以的，再在元素外面套一个$()就OK了。*/
			    checkS[i].onclick = function(){

			        var isSelectAll = true;//假设全选是选中状态的自定义变量
			        for(var i = 0;i<checkS.length;i++){
			            if(checkS[i].checked == false){
			                isSelectAll = false;
			                break;
			            }
			        }
			        if(isSelectAll){
			            $('input[name="stockCheckboxFid"]').prop("checked",true);
			            $("#allInner").html("全不选");
			        }
			        if(this.checked == false){
			            $('input[name="stockCheckboxFid"]').prop("checked",false);
			            $("#allInner").html("全选");
			        }
			    }
			}
		//全选前面小选项框
		 $('input[name="stockCheckboxFid"]').click(function(){
		    if(this.checked){
		        $(".stockCheckbox").prop("checked",true);
	            $("#allInner").html("全不选");
		    }else{
		        $(".stockCheckbox").prop("checked",false);
	            $("#allInner").html("全选");
		    }
		});
		
		
		//反选
		$("#reverse").on("click",function(){
			var checkSwe = $(".stockCheckbox");
		    /*按理说，反选被点击，全选应该为选中状态，
		    但是由于再次点击反选的时候，全选还是会是选中的状态，所以在这里我们设为不选中。
		    还有一个原因是，反选的时候，如果单选全被选中了，全选也是选中的，所以不会出现错乱。*/
		    $('input[name="stockCheckboxFid"]').prop("checked",false);
		    $("#allInner").html("全选");
		    for(var i = 0;i<checkSwe.length;i++){
		    	checkSwe[i].checked = !checkSwe[i].checked;
		    }
		    var isSelectAll = true;
		    for(var i = 0;i<checkSwe.length;i++){
		        if(checkSwe[i].checked == false){
		            isSelectAll = false;
		            break;
		        }
		    }
		    if(isSelectAll){
		        $("#allInner").html("全不选");
		        $('input[name="stockCheckboxFid"]').prop("checked",true);
		    }
		});
		//图片路径的添加
		function addIMG(){
			$.ajax({
				type : "get",
				contentType : "application/json;charset=utf-8", 
				url :"${pageContext.request.contextPath}/upload",
				data:{"file":"file"},
				dataType:"json",
				success:function(data){
					swal("提示", "添加图片成功!", "error");  
				},
				error:function(json){
					swal("提示", "添加图片失败!", "error");  
				}
			}); 
		}
		//图片的添加
		function changepic(stockId){
			//最低级判断后缀是否图片，不准确
			if(typeof FileReader != 'undefined'){    
				   var file = document.getElementById("jobData").files[0];    
				     if((file.type).indexOf("image/")==-1){  
				     swal("提示", "请上传图片!", "warning");
				     return false;
				    }  
				}else{  
				   var fileName=document.getElementById("jobData").value;  
				   var suffixIndex=fileName.lastIndexOf(".");  
				   var suffix=fileName.substring(suffixIndex+1).toUpperCase();  
				   if(suffix!="BMP"&&suffix!="JPG"&&suffix!="JPEG"&&suffix!="PNG"&&suffix!="GIF"){  
				    swal("提示", "请上传图片（格式BMP、JPG、JPEG、PNG、GIF等）!", "error");  
				     return false;
				   }  
				}  	
			        var reads = new FileReader();
					//获取需要添加的图片
					var fimgs=$("#fimgs"+stockId);
			        f = document.getElementById('jobData').files[0];
			        reads.readAsDataURL(f);
			        reads.onload = function(e) {
			           /* document.getElementById('img').src = this.result;
			           $("#img").css("display", "block");
			           $("#dialogBg").show();
			           $(".loading").show(); */
			           var form = new FormData();                  // 可以增加表单数据
			            // 存入文件对象
			           form.append("file",f);
					   form.append("fSku","${dTfzying.fsku}");
			           $.ajax({
			            //几个参数需要注意一下
			                type: "POST",//方法类型
			                dataType: "json",//预期服务器返回的数据类型
			                url: "${pageContext.request.contextPath}/upload?${_csrf.parameterName}=${_csrf.token}" ,//url
			                enctype: "multipart/form-data",
			                data: form,
			                processData: false,
			                contentType : false,
			                success: function (result) {
								//console.log(result[result.length-1]);
								//let po=result.fimg;
								//StockUnique++;
								//let you=po.split(",,");
								//fimgs.append('<img class="imgStocks'+StockUnique+'" width="20px" height="20px" style="margin:2.5px" src="/Shopping/resources/uploads/'+you[you.length-1]+' "/>');
								//btn_add(stockId);
								$("#mainViewImg").append('<div class="col-xs-2">'
										+'<input class="everyIMG" type="checkbox" style="display:block"/>'
										+'<img class="imgStockss" width="60px" height="60px"  src="/Shopping/resources/uploads/'+result[result.length-1].fImagesUrl.split("F:/LibraryImage/")[1]+' "/></div>');
			                    //console.log(you[you.length-1]);
			                },
			                error : function(result) {
								swal("提示", "添加图片失败!", "error");  
			                }
			            });
			        };
			     }
		//主图片的添加
		function changepic(){
			//最低级判断后缀是否图片，不准确
			if(typeof FileReader != 'undefined'){    
				   var file = document.getElementById("jobData").files[0];    
				     if((file.type).indexOf("image/")==-1){  
				     swal("提示", "请上传图片!", "warning");
				     return false;
				    }  
				}else{  
				   var fileName=document.getElementById("jobData").value;  
				   var suffixIndex=fileName.lastIndexOf(".");  
				   var suffix=fileName.substring(suffixIndex+1).toUpperCase();  
				   if(suffix!="BMP"&&suffix!="JPG"&&suffix!="JPEG"&&suffix!="PNG"&&suffix!="GIF"){  
				    swal("提示", "请上传图片（格式BMP、JPG、JPEG、PNG、GIF等）!", "error");  
				     return false;
				   }  
				}  	
			        var reads = new FileReader();
					//获取需要添加的图片
					var fimgs=$("#picss");
			        f = document.getElementById('jobData').files[0];
			        reads.readAsDataURL(f);
			        reads.onload = function(e) {
			           /* document.getElementById('img').src = this.result;
			           $("#img").css("display", "block");
			           $("#dialogBg").show();
			           $(".loading").show(); */
			           var form = new FormData();                  // 可以增加表单数据
			            // 存入文件对象
			           form.append("file",f);
					   form.append("fSku","${dTfzying.fsku}");
			           $.ajax({
			            //几个参数需要注意一下
			                type: "POST",//方法类型
			                dataType: "json",//预期服务器返回的数据类型
			                url: "${pageContext.request.contextPath}/upload?${_csrf.parameterName}=${_csrf.token}" ,//url
			                enctype: "multipart/form-data",
			                data: form,
			                processData: false,
			                contentType : false,
			                success: function (result) {
								//console.log(result[result.length-1]);
								//let po=result.fimg;
								//StockUnique++;
								//let you=po.split(",,");
								//fimgs.append('<img class="imgStocks'+StockUnique+'" width="20px" height="20px" style="margin:2.5px" src="/Shopping/resources/uploads/'+you[you.length-1]+' "/>');
								//btn_add(stockId);
								$("#mainViewImg").append('<div class="col-xs-2">'
										+'<input class="everyIMGss" type="checkbox" style="display:block"/>'
										+'<img class="imgStocksss" width="60px" height="60px"  src="/Shopping/resources/uploads/'+result[result.length-1].fImagesUrl.split("F:/LibraryImage/")[1]+' "/></div>');
			                    saveImgMain();
								//console.log(you[you.length-1]);
			                },
			                error : function(result) {
								swal("提示", "添加图片失败!", "error");  
			                }
			            });
			        };
			     }
		//注册新增按钮的事件
		 function btn_add(stockId){
			
			 var allImgs=$(".StockUniques");
			 var fimgs=$("#mainViewImg");
			 
			 //图片集，到后台要遍历
			 var listFimgs="";
			 //清楚原先的样式
			 fimgs.html("");
			 for(let io=0;io<allImgs.length;io++){
				 for(let i=0;i<$(".imgStocks"+stockId).length;i++){
					 //查询所属变体的图片
					 listFimgs=listFimgs+",,"+$(".imgStocks"+stockId).eq(i).attr("src");
				 }
			 }
			 var dateas=JSON.stringify({
					    "fSku": "${dTfzying.fsku}",
					    "fImagesUrl":listFimgs
			 });
			 
			 //记录重复的序号
			 var sunm="";
			 $.ajax({
				//几个参数需要注意一下
				type : "post",
				contentType : "application/json;charset=utf-8", 
				url :"${pageContext.request.contextPath}/admin/mainViewImgs?${_csrf.parameterName}=${_csrf.token}",
				data:dateas,
				dataType:"json",
				success: function (result) {
				//添加图片
				for(let ti=0;ti<result.length;ti++){
					 for(let i=0;i<$(".imgStocks"+stockId).length;i++){
						 //查询所属变体的图片
						 if($(".imgStocks"+stockId).eq(i).attr("src").split(" ")[0]==('/Shopping/resources/uploads/'+result[ti].split("F:/LibraryImage/")[1])){
							 sunm+=ti+",";
						 }
					 }
					 fimgs.append('<div class="col-xs-2">'
								+'<input class="everyIMG" type="checkbox" style="display:block"/>'
								+'<img class="imgStockss" width="60px" height="60px"  src="/Shopping/resources/uploads/'+result[ti].split("F:/LibraryImage/")[1]+' "/></div>');
				}
				var listsum=sunm.substr(0, sunm.length - 1).split(",");
				if(listsum!=""){
					//判断是否已经选择
					for(let t=0;t<listsum.length;t++){
						$(".everyIMG").eq(listsum[t]).attr("checked","checked");
					}
				}
				
				
				//单选
					var checkSe = $(".everyIMG");
					for(var i = 0;i<checkSe.length;i++){
					    /*那这里可能有小伙伴会说了，萍子你不是说好了要用jq的方法，怎么又写了js的方法呢。
					    原因是，当对一个jq数组对象取下标以后，取到的这个就变成了一个原生对象，所以这里我又用了js原生方法。
					    当然了，如果还是想用jq方法的话也是可以的，再在元素外面套一个$()就OK了。*/
					    checkSe[i].onclick = function(){
					        var isSelectAll = true;//假设全选是选中状态的自定义变量
					        for(var i = 0;i<checkSe.length;i++){
					            if(checkSe[i].checked == false){
					                isSelectAll = false;
					                break;
					            }
					        }
					        if(isSelectAll){
					            $('#checkZi').prop("checked",true);
					        }
					        if(this.checked == false){
					            $('#checkZi').prop("checked",false);
					        }
					    }
					}
				
				//在遮罩层添加内容
				$("#addim").val(stockId);
				$("#addims").html("");
				$("#saveIMGs").html("");
				$(".modal-content").css('margin-top','650px');
				$("#addims").append('<button type="button" class="btn btn-default" onclick="changepic('+stockId+')"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span>图片添加</button>');
				$("#addims").append('<button type="button"  id="everyIMGs" class="btn btn-default" style="background:#458B74;color:white"><input id="checkZi" type="checkbox" style="display:none"/>全选</button>');
				$("#addims").append('<button type="button" id="reverseIMGs" class="btn btn-default" style="background:#458B74;color:white">反选</button>');
				$("#addims").append('<button type="button"  class="btn btn-default" data-dismiss="modal" style="background:#ee4747;color:white"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span>关闭</button>');
				$("#saveIMGs").append('<button type="button" id="btn_submit" class="btn btn-primary" onclick="saveImg('+stockId+')" data-dismiss="modal"><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span>保存</button>');
				$("#myModalLabel").text("编辑图片");
				$('#myModal').modal();
				//图片全选$("#reverseIMGs").on("click",function(){
				 $('#everyIMGs').on("click",function(){
					 
					 if($('#checkZi').is(':checked')==false){
					        $("#checkZi").prop("checked",true);
					        $(".everyIMG").prop("checked",true);
					    }else{
					        $("#checkZi").prop("checked",false);
					        $(".everyIMG").prop("checked",false);
					    }
				});
				 
				//图片反选
					$("#reverseIMGs").on("click",function(){
					    /*按理说，反选被点击，全选应该为选中状态，
					    但是由于再次点击反选的时候，全选还是会是选中的状态，所以在这里我们设为不选中。
					    还有一个原因是，反选的时候，如果单选全被选中了，全选也是选中的，所以不会出现错乱。*/
					    $('#checkZi').prop("checked",false);
					    for(var i = 0;i<checkSe.length;i++){
					    	checkSe[i].checked = !checkSe[i].checked;
					    }
					    var isSelectAll = true;
					    for(var i = 0;i<checkSe.length;i++){
					        if(checkSe[i].checked == false){
					            isSelectAll = false;
					            break;
					        }
					    }
					    if(isSelectAll){
					        $('#checkZi').prop("checked",true);
					    }
					})
				},
				error : function(result) {
					swal("提示", "新增注册按钮失败!", "error"); 
					console.log(result);
				}
				});
			} 
		 
		//图片修改
		function saveImg(stockId){
			var se=$(".everyIMG");
			var imgs=$(".imgStockss");
			var p="";
			for(let c=0;c<se.length;c++){
				if(se[c].checked){
					p+=",,"+imgs[c].src.split("Shopping/resources/uploads/")[1];
				}
			}
			//原图片清空
			$("#fimgs"+stockId).html("")
			
			//新图片添加
			var result=p.split(",,");
			for(var ssy=0;ssy<result.length;ssy++){
				//去除空值
				if(result[ssy]==""){
					continue;
				}
				//添加图片
				$("#fimgs"+stockId).append('<img class="imgStocks'+stockId+'" width="20px" height="20px" style="margin:2.5px" src="/Shopping/resources/uploads/'+result[ssy]+' "/>');
			}
			//单独保存
			/* var dates=JSON.stringify({"fimg":p,
					"fid":"${dTfzying.fsku}",
					"id":stockId})
			$.ajax({
				//几个参数需要注意一下
				type : "post", 
				contentType : "application/json;charset=utf-8", 
				url :"${pageContext.request.contextPath}/admin/saveViewImgs?${_csrf.parameterName}=${_csrf.token}",
				data:dates,
				dataType:"json",
				success: function (result) {
					swal("提示", "图片修改成功", "success");
					
				},
				error : function(result) {
					swal("提示", "图片修改失败!", "error");
					console.log(result);
				}
			});	 */
		}
		
		//主图添加
		$("#mainUpdateimg").on("click",function(){
			var allImgs=$(".mianImgs");
			 var fimgs=$("#mainViewImg");
			 var　stockId=createRandomId();
			 //图片集，到后台要遍历
			 var listFimgs="";
			 //清楚原先的样式
			 fimgs.html("");
			
			 var dateas=JSON.stringify({
					    "fSku": "${dTfzying.fsku}"
			 });
				
			 //记录重复的序号
			 var sunm="";
			 $.ajax({
				//几个参数需要注意一下
				type : "post",
				contentType : "application/json;charset=utf-8", 
				url :"${pageContext.request.contextPath}/admin/mainViewImgs?${_csrf.parameterName}=${_csrf.token}",
				data:dateas,
				dataType:"json",
				success: function (result) {
				
				//添加图片
				for(let ti=0;ti<result.length;ti++){
					
					 fimgs.append('<div class="col-xs-2">'
								+'<input class="everyIMGss" type="checkbox" style="display:block"/>'
								+'<img class="imgStocksss" width="60px" height="60px"  src="/Shopping/resources/uploads/'+result[ti].split("F:/LibraryImage/")[1]+' "/></div>');
				}
				//单选
					var checkSe = $(".everyIMGss");
					for(var i = 0;i<checkSe.length;i++){
					    /*那这里可能有小伙伴会说了，萍子你不是说好了要用jq的方法，怎么又写了js的方法呢。
					    原因是，当对一个jq数组对象取下标以后，取到的这个就变成了一个原生对象，所以这里我又用了js原生方法。
					    当然了，如果还是想用jq方法的话也是可以的，再在元素外面套一个$()就OK了。*/
					    checkSe[i].onclick = function(){
					        var isSelectAll = true;//假设全选是选中状态的自定义变量
					        for(var i = 0;i<checkSe.length;i++){
					            if(checkSe[i].checked == false){
					                isSelectAll = false;
					                break;
					            }
					        }
					        if(isSelectAll){
					            $('#checkZi').prop("checked",true);
					        }
					        if(this.checked == false){
					            $('#checkZi').prop("checked",false);
					        }
					    }
					}
				
				//在遮罩层添加内容
				$("#addim").val(stockId);
				$("#addims").html("");
				$("#saveIMGs").html("");
				$(".modal-content").css('margin-top','50px');
				$("#addims").append('<button type="button" class="btn btn-default" onclick="changepic()"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span>图片添加</button>');
				$("#addims").append('<button type="button"  id="everyIMGs" class="btn btn-default" style="background:#458B74;color:white"><input id="checkZi" type="checkbox" style="display:none"/>全选</button>');
				$("#addims").append('<button type="button" id="reverseIMGs" class="btn btn-default" style="background:#458B74;color:white">反选</button>');
				$("#addims").append('<button type="button"  class="btn btn-default" data-dismiss="modal" style="background:#ee4747;color:white"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span>关闭</button>');
				$("#saveIMGs").append('<button type="button" id="btn_submit" class="btn btn-primary" onclick="deletMainImgs()" data-dismiss="modal" style="background:#ee4747;color:white;border:1px solid #f7f9fa"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span>删除</button>');
				$("#myModalLabel").text("图片添加后自动保存");
				$('#myModal').modal();
				//图片全选$("#reverseIMGs").on("click",function(){
				 $('#everyIMGs').on("click",function(){
					 if($('#checkZi').is(':checked')==false){
					        $("#checkZi").prop("checked",true);
					        $(".everyIMGss").prop("checked",true);
					    }else{
					        $("#checkZi").prop("checked",false);
					        $(".everyIMGss").prop("checked",false);
					    }
				});
				 
				//图片反选
					$("#reverseIMGs").on("click",function(){
					
					    /*按理说，反选被点击，全选应该为选中状态，
					    但是由于再次点击反选的时候，全选还是会是选中的状态，所以在这里我们设为不选中。
					    还有一个原因是，反选的时候，如果单选全被选中了，全选也是选中的，所以不会出现错乱。*/
					    $('#checkZi').prop("checked",false);
					    for(var i = 0;i<checkSe.length;i++){
					    	checkSe[i].checked = !checkSe[i].checked;
					    }
					    var isSelectAll = true;
					    for(var i = 0;i<checkSe.length;i++){
					        if(checkSe[i].checked == false){
					            isSelectAll = false;
					            break;
					        }
					    }
					    if(isSelectAll){
					        $('#checkZi').prop("checked",true);
					    }
					})
				},
				error : function(result) {
					swal("提示", "新增注册按钮失败!", "error"); 
					console.log(result);
				}
			});
		});
		function saveImgMain(){
			var se=$(".everyIMGss");
			var imgs=$(".imgStocksss");
			var p="";
			for(let c=0;c<se.length;c++){
					p+=",,"+imgs[c].src.split("Shopping/resources/uploads/")[1];
				
			}
			//原图片清空
			$("#picss").html("");

			//新图片添加
			var result=p.split(",,");
			for(var ssy=0;ssy<result.length;ssy++){
				//去除空值
				if(result[ssy]==""){
					continue;
				}
				//添加图片
				$("#picss").append('<img class="mainImgs" width="50px" height="50px" style="margin:2.5px;float:left" src="/Shopping/resources/uploads/'+result[ssy]+'"/>');
			}
		}
		
		function deletMainImgs(){
			//获取主图的选择
			var mainImgs=$(".everyIMGss");
			//获取主图的图片
			var mainIMGView=$(".imgStocksss");
			
			for(let i=0;i<mainImgs.length;i++){
				
				 if(mainImgs[i].checked==true){
					//mainIMGView[i].src;
					let dateas=JSON.stringify({
						"fImagesUrl":"F:/LibraryImage/"+mainIMGView[i].src.split("/resources/uploads/")[1],
						"fSku":"${dTfzying.fsku}"
						});
					 $.ajax({
							//几个参数需要注意一下
							type : "post",
							contentType : "application/json;charset=utf-8", 
							url :"${pageContext.request.contextPath}/admin/deletMainImgs?${_csrf.parameterName}=${_csrf.token}",
							data:dateas,
							dataType:"json",
							success: function (result) { 
								swal("提示", "删除成功!", "success"); 
								$(".sweet-alert").css('margin-top','-600px');
								
							}
					 });
				} 
			}
			//查询图片
			seleView();
		}
		
		//查询主图
		function seleView(){
			//原图片清空
			$("#picss").html("");
			let dateas=JSON.stringify({
				"fSku":"${dTfzying.fsku}"
				});
			$.ajax({
				//几个参数需要注意一下
				type : "post",
				contentType : "application/json;charset=utf-8", 
				url :"${pageContext.request.contextPath}/admin/selMainImgs?${_csrf.parameterName}=${_csrf.token}",
				data:dateas,
				dataType:"json",
				success: function (result) { 
					console.log(result);
					for(let i=0;i<result.length;i++){
						$("#picss").append('<img class="mainImgs" width="50px" height="50px" style="margin:2.5px;float:left" src="/Shopping/resources/uploads/'+result[i]+'"/>');
					}
				}
		 });
		}
		//全选按钮点击事件
		 /* $('input[name="stockCheckboxFid"]').click(function(){
	       //当全选按钮是选中状态
	        if($(this).is(':checked')){  
	        	//循环下面所有checkbox
	            $('.stockCheckbox').each(function(){  
	            	//将checkbox状态改为选中
	                $(this).prop("checked",true); 
	            });  
	    	}else{  
		        $('.stockCheckbox').each(function(){  
		            $(this).removeAttr("checked",false);  
		       });  
	    	}  
		});  */
		
	</script>
</body>
</html>